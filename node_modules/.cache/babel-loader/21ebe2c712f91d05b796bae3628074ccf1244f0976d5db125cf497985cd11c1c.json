{"ast":null,"code":"import axios from \"axios\";\nimport AppConfig from \"./apiConfig\";\nimport { methodType } from \"./apiEndPoints\";\nimport { getUserToken, signOut } from \"../../helper/storage\";\n// import { getUserToken, signOut } from \"@/helper/storage\";\n\naxios.interceptors.response.use(response => {\n  const {\n    data\n  } = response;\n  return data;\n}, error => {\n  var _response$config, _response$config$url, _response$config2, _response$config2$url;\n  const {\n    response: {\n      data\n    },\n    response\n  } = error;\n  // write 401 case condition here\n  if ((response === null || response === void 0 ? void 0 : response.status) === 401 && !(response !== null && response !== void 0 && (_response$config = response.config) !== null && _response$config !== void 0 && (_response$config$url = _response$config.url) !== null && _response$config$url !== void 0 && _response$config$url.includes(\"login\")) && !((response === null || response === void 0 ? void 0 : (_response$config2 = response.config) === null || _response$config2 === void 0 ? void 0 : (_response$config2$url = _response$config2.url) === null || _response$config2$url === void 0 ? void 0 : _response$config2$url.search(\"change_password\")) > 0)) {\n    signOut();\n    return Promise.reject(error);\n  }\n  if (data) {\n    return data;\n  } else {\n    return Promise.reject(error);\n  }\n});\nexport const performRequest = async (method, url, data = {}, token = false, formData = false) => {\n  url = url.replaceAll(\"#\", \"%23\");\n  const config = {\n    method,\n    url,\n    baseURL: AppConfig.baseURL\n  };\n  if (method === methodType.PUT || method === methodType.PATCH || method === methodType.POST || method === methodType.DELETE) {\n    config.data = data;\n  }\n  if (method === methodType.GET) {\n    config.params = data;\n  }\n  if (formData) {\n    config.headers = {\n      \"Content-Type\": \"multipart/form-data; boundary=<calculated when request is sent>\"\n    };\n  } else {\n    config.headers = {\n      \"Content-Type\": \"application/json; charset=utf-8\"\n    };\n  }\n  if (token && getUserToken() !== null) {\n    config.headers.Authorization = `Bearer ${getUserToken()}`;\n  }\n  config.headers[\"timezone\"] = Intl.DateTimeFormat().resolvedOptions().timeZone;\n  console.log(\"config\", config);\n  return axios(config);\n};","map":{"version":3,"names":["axios","AppConfig","methodType","getUserToken","signOut","interceptors","response","use","data","error","_response$config","_response$config$url","_response$config2","_response$config2$url","status","config","url","includes","search","Promise","reject","performRequest","method","token","formData","replaceAll","baseURL","PUT","PATCH","POST","DELETE","GET","params","headers","Authorization","Intl","DateTimeFormat","resolvedOptions","timeZone","console","log"],"sources":["/home/abc/Documents/alit-task/my-app/src/services/_apiConfig/apiHandler.js"],"sourcesContent":["import axios from \"axios\";\nimport AppConfig from \"./apiConfig\";\nimport { methodType } from \"./apiEndPoints\";\nimport { getUserToken, signOut } from \"../../helper/storage\";\n// import { getUserToken, signOut } from \"@/helper/storage\";\n\naxios.interceptors.response.use(\n  (response) => {\n    const { data } = response;\n    return data;\n  },\n  (error) => {\n    const {\n      response: { data },\n      response,\n    } = error;\n    // write 401 case condition here\n    if (\n      response?.status === 401 &&\n      !response?.config?.url?.includes(\"login\") &&\n      !(response?.config?.url?.search(\"change_password\") > 0)\n    ) {\n      signOut();\n      return Promise.reject(error);\n    }\n    if (data) {\n      return data;\n    } else {\n      return Promise.reject(error);\n    }\n  }\n);\n\nexport const performRequest = async (method, url, data = {}, token = false, formData = false) => {\n  url = url.replaceAll(\"#\", \"%23\");\n  const config = {\n    method,\n    url,\n    baseURL: AppConfig.baseURL,\n  };\n\n  if (method === methodType.PUT || method === methodType.PATCH || method === methodType.POST || method === methodType.DELETE) {\n    config.data = data;\n  }\n\n  if (method === methodType.GET) {\n    config.params = data;\n  }\n\n  if (formData) {\n    config.headers = {\n      \"Content-Type\": \"multipart/form-data; boundary=<calculated when request is sent>\",\n    };\n  } else {\n    config.headers = {\n      \"Content-Type\": \"application/json; charset=utf-8\",\n    };\n  }\n  if (token && getUserToken() !== null) {\n    config.headers.Authorization = `Bearer ${getUserToken()}`;\n  }\n\n  config.headers[\"timezone\"] = Intl.DateTimeFormat().resolvedOptions().timeZone;\n  console.log(\"config\", config)\n  return axios(config);\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}